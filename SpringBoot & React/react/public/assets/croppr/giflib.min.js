!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.SuperGif=e()}(this,function(){var t=function(t){return t.reduce(function(t,e){return 2*t+e},0)},e=function(t){for(var e=[],n=7;n>=0;n--)e.push(!!(t&1<<n));return e},n=function(t){this.data=t,this.len=this.data.length,this.pos=0,this.readByte=function(){if(this.pos>=this.data.length)throw new Error("Attempted to read past end of stream.");return t instanceof Uint8Array?t[this.pos++]:255&t.charCodeAt(this.pos++)},this.readBytes=function(t){for(var e=[],n=0;n<t;n++)e.push(this.readByte());return e},this.read=function(t){for(var e="",n=0;n<t;n++)e+=String.fromCharCode(this.readByte());return e},this.readUnsigned=function(){var t=this.readBytes(2);return(t[1]<<8)+t[0]}},r=function(n,r){r||(r={});var i=function(t){for(var e=[],r=0;r<t;r++)e.push(n.readBytes(3));return e},a=function(){var t,e;e="";do{t=n.readByte(),e+=n.read(t)}while(0!==t);return e},o=function(o){o.leftPos=n.readUnsigned(),o.topPos=n.readUnsigned(),o.width=n.readUnsigned(),o.height=n.readUnsigned();var c=e(n.readByte());o.lctFlag=c.shift(),o.interlaced=c.shift(),o.sorted=c.shift(),o.reserved=c.splice(0,2),o.lctSize=t(c.splice(0,3)),o.lctFlag&&(o.lct=i(1<<o.lctSize+1)),o.lzwMinCodeSize=n.readByte();var u=a();o.pixels=function(t,e){for(var n,r,i=0,a=function(t){for(var n=0,r=0;r<t;r++)e.charCodeAt(i>>3)&1<<(7&i)&&(n|=1<<r),i++;return n},o=[],c=1<<t,u=c+1,l=t+1,s=[],f=function(){s=[],l=t+1;for(var e=0;e<c;e++)s[e]=[e];s[c]=[],s[u]=null};;)if(r=n,(n=a(l))!==c){if(n===u)break;if(n<s.length)r!==c&&s.push(s[r].concat(s[n][0]));else{if(n!==s.length)throw new Error("Invalid LZW code.");s.push(s[r].concat(s[r][0]))}o.push.apply(o,s[n]),s.length===1<<l&&l<12&&l++}else f();return o}(o.lzwMinCodeSize,u),o.interlaced&&(o.pixels=function(t,e){for(var n=new Array(t.length),r=t.length/e,i=function(r,i){var a=t.slice(i*e,(i+1)*e);n.splice.apply(n,[r*e,e].concat(a))},a=[0,4,2,1],o=[8,8,4,2],c=0,u=0;u<4;u++)for(var l=a[u];l<r;l+=o[u])i(l,c),c++;return n}(o.pixels,o.width)),r.img&&r.img(o)},c=function(){var i={};switch(i.sentinel=n.readByte(),String.fromCharCode(i.sentinel)){case"!":i.type="ext",function(i){switch(i.label=n.readByte(),i.label){case 249:i.extType="gce",function(i){n.readByte();var a=e(n.readByte());i.reserved=a.splice(0,3),i.disposalMethod=t(a.splice(0,3)),i.userInput=a.shift(),i.transparencyGiven=a.shift(),i.delayTime=n.readUnsigned(),i.transparencyIndex=n.readByte(),i.terminator=n.readByte(),r.gce&&r.gce(i)}(i);break;case 254:i.extType="com",function(t){t.comment=a(),r.com&&r.com(t)}(i);break;case 1:i.extType="pte",function(t){n.readByte(),t.ptHeader=n.readBytes(12),t.ptData=a(),r.pte&&r.pte(t)}(i);break;case 255:i.extType="app",function(t){switch(n.readByte(),t.identifier=n.read(8),t.authCode=n.read(3),t.identifier){case"NETSCAPE":!function(t){n.readByte(),t.unknown=n.readByte(),t.iterations=n.readUnsigned(),t.terminator=n.readByte(),r.app&&r.app.NETSCAPE&&r.app.NETSCAPE(t)}(t);break;default:!function(t){t.appData=a(),r.app&&r.app[t.identifier]&&r.app[t.identifier](t)}(t)}}(i);break;default:i.extType="unknown",function(t){t.data=a(),r.unknown&&r.unknown(t)}(i)}}(i);break;case",":i.type="img",o(i);break;case";":i.type="eof",r.eof&&r.eof(i);break;default:throw new Error("Unknown block: 0x"+i.sentinel.toString(16))}"eof"!==i.type&&setTimeout(c,0)};!function(){var a={};if(a.sig=n.read(3),a.ver=n.read(3),"GIF"!==a.sig)throw new Error("Not a GIF file.");a.width=n.readUnsigned(),a.height=n.readUnsigned();var o=e(n.readByte());a.gctFlag=o.shift(),a.colorRes=t(o.splice(0,3)),a.sorted=o.shift(),a.gctSize=t(o.splice(0,3)),a.bgColor=n.readByte(),a.pixelAspectRatio=n.readByte(),a.gctFlag&&(a.gct=i(1<<a.gctSize+1)),r.hdr&&r.hdr(a)}(),setTimeout(c,0)};return function(t){var e,i,a={vp_l:0,vp_t:0,vp_w:null,vp_h:null,c_w:null,c_h:null};for(var o in t)a[o]=t[o];a.vp_w&&a.vp_h&&(a.is_vp=!0);var c=null,u=!1,l=null,s=null,f=null,h=null,d=null,p=null,g=null,y=!0,w=!1,v=[],m=[],_=a.gif;void 0===a.auto_play&&(a.auto_play=!_.getAttribute("rel:auto_play")||"1"==_.getAttribute("rel:auto_play"));var B,b,x,T,C=a.hasOwnProperty("on_end")?a.on_end:null,P=a.hasOwnProperty("loop_delay")?a.loop_delay:0,E=a.hasOwnProperty("loop_mode")?a.loop_mode:"auto",A=!a.hasOwnProperty("draw_while_loading")||a.draw_while_loading,S=!!A&&(!a.hasOwnProperty("show_progress_bar")||a.show_progress_bar),k=a.hasOwnProperty("progressbar_height")?a.progressbar_height:25,I=a.hasOwnProperty("progressbar_background_color")?a.progressbar_background_color:"rgba(255,255,255,0.4)",U=a.hasOwnProperty("progressbar_foreground_color")?a.progressbar_foreground_color:"rgba(255,0,22,.8)",F=function(){l=null,s=null,d=f,f=null,p=null},D=function(){try{r(e,L)}catch(t){N("parse")}},R=function(t,e){B.width=t*Z(),B.height=e*Z(),x.style.minWidth=t*Z()+"px",T.width=t,T.height=e,T.style.width=t+"px",T.style.height=e+"px",T.getContext("2d").setTransform(1,0,0,1,0,0)},z=function(t,e,n){if(n&&S){var r,i,o,c=k;a.is_vp?w?(i=(a.vp_t+a.vp_h-c)/Z(),c/=Z(),r=a.vp_l/Z()+t/e*(a.vp_w/Z()),o=B.width/Z()):(i=a.vp_t+a.vp_h-c,c=c,r=a.vp_l+t/e*a.vp_w,o=B.width):(i=(B.height-c)/(w?Z():1),r=t/e*B.width/(w?Z():1),o=B.width/(w?Z():1),c/=w?Z():1),b.fillStyle=I,b.fillRect(r,i,o-r,c),b.fillStyle=U,b.fillRect(0,i,r,c)}},N=function(t){c=t,i={width:_.width,height:_.height},v=[],b.fillStyle="black",b.fillRect(0,0,a.c_w?a.c_w:i.width,a.c_h?a.c_h:i.height),b.strokeStyle="red",b.lineWidth=3,b.moveTo(0,0),b.lineTo(a.c_w?a.c_w:i.width,a.c_h?a.c_h:i.height),b.moveTo(0,a.c_h?a.c_h:i.height),b.lineTo(a.c_w?a.c_w:i.width,0),b.stroke()},O=function(){p&&(v.push({data:p.getImageData(0,0,i.width,i.height),delay:s}),m.push({x:0,y:0}))},M=function(){var t,e,n,r=-1,i=0,o=function(t){r+=t,l()},u=(t=!1,e=function(){null!==C&&C(_),i++,!1!==E||i<0?n():(t=!1,y=!1)},n=function(){if(t=y){o(1);var i=10*v[r].delay;i||(i=100),0==(r+1+v.length)%v.length?(i+=P,setTimeout(e,i)):setTimeout(n,i)}},function(){t||setTimeout(n,0)}),l=function(){var t;(r=parseInt(r,10))>v.length-1&&(r=0),r<0&&(r=0),t=m[r],T.getContext("2d").putImageData(v[r].data,t.x,t.y),b.globalCompositeOperation="copy",b.drawImage(T,0,0)};return{init:function(){c||(a.c_w&&a.c_h||b.scale(Z(),Z()),a.auto_play?u():(r=0,l()))},step:u,play:function(){y=!0,u()},pause:function(){y=!1},playing:y,move_relative:o,current_frame:function(){return r},length:function(){return v.length},move_to:function(t){r=t,l()}}}(),G=function(t){z(e.pos,e.data.length,t)},W=function(){},j=function(t,e){return function(n){t(n),G(e)}},L={hdr:j(function(t){R((i=t).width,i.height)}),gce:j(function(t){O(),F(),l=t.transparencyGiven?t.transparencyIndex:null,s=t.delayTime,f=t.disposalMethod}),com:j(W),app:{NETSCAPE:j(W)},img:j(function(t){p||(p=T.getContext("2d"));var e=v.length,n=t.lctFlag?t.lct:i.gct;e>0&&(3===d?null!==h?p.putImageData(v[h].data,0,0):p.clearRect(g.leftPos,g.topPos,g.width,g.height):h=e-1,2===d&&p.clearRect(g.leftPos,g.topPos,g.width,g.height));var r=p.getImageData(t.leftPos,t.topPos,t.width,t.height);t.pixels.forEach(function(t,e){t!==l&&(r.data[4*e+0]=n[t][0],r.data[4*e+1]=n[t][1],r.data[4*e+2]=n[t][2],r.data[4*e+3]=255)}),p.putImageData(r,t.leftPos,t.topPos),w||(b.scale(Z(),Z()),w=!0),A&&(b.drawImage(T,0,0),A=a.auto_play),g=t},!0),eof:function(t){O(),G(!1),a.c_w&&a.c_h||(B.width=i.width*Z(),B.height=i.height*Z()),M.init(),u=!1,q&&q(_)}},Q=function(){var t=document.createElement("div");B=document.createElement("canvas"),b=B.getContext("2d"),x=document.createElement("div"),T=document.createElement("canvas"),t.width=B.width=_.width,t.height=B.height=_.height,x.style.minWidth=_.width+"px",t.className="jsgif",x.className="jsgif_toolbar",t.appendChild(B),t.appendChild(x),a.c_w&&a.c_h&&R(a.c_w,a.c_h),H=!0},Z=function(){return a.max_width&&i&&i.width>a.max_width?a.max_width/i.width:1},H=!1,q=!1,V=function(t){return!u&&(q=t||!1,u=!0,v=[],F(),h=null,d=null,p=null,g=null,!0)};function X(t){var e=document.createElement("canvas"),n=e.getContext("2d");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),e}return{get_crop_data_list:function(t){const e=new Array;for(var n=0;n<M.length();n++){M.move_to(n);const r=X(B).getContext("2d");e.push({data:r.getImageData(t.x,t.y,t.width,t.height).data,delay:v[M.current_frame()].delay})}return e},play:M.play,pause:M.pause,move_relative:M.move_relative,move_to:M.move_to,get_playing:function(){return y},get_canvas:function(){return B},get_canvas_scale:function(){return Z()},get_loading:function(){return u},get_auto_play:function(){return a.auto_play},get_length:function(){return M.length()},get_current_frame:function(){return M.current_frame()},load_url:function(t,r){if(V(r)){var i=new XMLHttpRequest;i.open("GET",t,!0),"overrideMimeType"in i?i.overrideMimeType("text/plain; charset=x-user-defined"):"responseType"in i?i.responseType="arraybuffer":i.setRequestHeader("Accept-Charset","x-user-defined"),i.onloadstart=function(){H||Q()},i.onload=function(t){200!=this.status&&N("xhr - response"),"response"in this||(this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var r=this.response;r.toString().indexOf("ArrayBuffer")>0&&(r=new Uint8Array(r)),e=new n(r),setTimeout(D,0)},i.onprogress=function(t){t.lengthComputable&&z(t.loaded,t.total,!0)},i.onerror=function(){N("xhr")},i.send()}},load:function(t){this.load_url(_.getAttribute("rel:animated_src")||_.src,t)},load_raw:function(t,r){V(r)&&(H||Q(),e=new n(t),setTimeout(D,0))},set_frame_offset:function(t,e){m[t]?(void 0!==e.x&&(m[t].x=e.x),void 0!==e.y&&(m[t].y=e.y)):m[t]=e}}}}),LZWEncoder=function(){var t,e,n,r,i,a,o,c,u,l,s,f,h={},d=[],p=[],g=0,y=!1,w=0,v=0,m=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],_=[],B=h.LZWEncoder=function(i,a,o,c){t=i,e=a,n=o,r=Math.max(2,c)},b=function(t,e){_[f++]=t,f>=254&&P(e)},x=function(t){T(5003),g=l+2,y=!0,S(l,t)},T=function(t){for(var e=0;e<t;++e)d[e]=-1},C=h.compress=function(t,e){var n,r,i,a,h,w;for(y=!1,c=E(o=u=t),s=(l=1<<t-1)+1,g=l+2,f=0,a=A(),w=0,n=5003;n<65536;n*=2)++w;w=8-w,T(5003),S(l,e);t:for(;-1!=(i=A());)if(n=(i<<12)+a,d[r=i<<w^a]!=n){if(d[r]>=0){h=5003-r,0===r&&(h=1);do{if((r-=h)<0&&(r+=5003),d[r]==n){a=p[r];continue t}}while(d[r]>=0)}S(a,e),a=i,g<4096?(p[r]=g++,d[r]=n):x(e)}else a=p[r];S(a,e),S(s,e)},P=(h.encode=function(n){n.writeByte(r),i=t*e,a=0,C(r+1,n),n.writeByte(0)},function(t){f>0&&(t.writeByte(f),t.writeBytes(_,0,f),f=0)}),E=function(t){return(1<<t)-1},A=function(){return 0===i?-1:(--i,255&n[a++])},S=function(t,e){for(w&=m[v],v>0?w|=t<<v:w=t,v+=o;v>=8;)b(255&w,e),w>>=8,v-=8;if((g>c||y)&&(y?(c=E(o=u),y=!1):c=12==++o?4096:E(o)),t==s){for(;v>0;)b(255&w,e),w>>=8,v-=8;P(e)}};return B.apply(this,arguments),h},NeuQuant=function(){var t,e,n,r,i,a={},o=[],c=[],u=[],l=[],s=a.NeuQuant=function(t,a,o){var l,s;for(e=t,n=a,r=o,i=new Array(256),l=0;l<256;l++)i[l]=new Array(4),(s=i[l])[0]=s[1]=s[2]=(l<<12)/256,u[l]=256,c[l]=0},f=(a.map=function(t,e,n){var r,a,c,u,l,s,f;for(l=1e3,f=-1,a=(r=o[e])-1;r<256||a>=0;)r<256&&((c=(s=i[r])[1]-e)>=l?r=256:(r++,c<0&&(c=-c),(u=s[0]-t)<0&&(u=-u),(c+=u)<l&&((u=s[2]-n)<0&&(u=-u),(c+=u)<l&&(l=c,f=s[3])))),a>=0&&((c=e-(s=i[a])[1])>=l?a=-1:(a--,c<0&&(c=-c),(u=s[0]-t)<0&&(u=-u),(c+=u)<l&&((u=s[2]-n)<0&&(u=-u),(c+=u)<l&&(l=c,f=s[3]))));return f},a.process=function(){return function(){var i,a,o,c,u,s,f,g,y,w,v,m,_,B;for(n<1509&&(r=1),t=30+(r-1)/3,m=e,_=0,B=n,w=(v=n/(3*r))/100|0,g=1024,(f=(s=2048)>>6)<=1&&(f=0),i=0;i<f;i++)l[i]=g*(256*(f*f-i*i)/(f*f));for(y=n<1509?3:n%499!=0?1497:n%491!=0?1473:n%487!=0?1461:1509,i=0;i<v;)if(o=(255&m[_+0])<<4,c=(255&m[_+1])<<4,u=(255&m[_+2])<<4,a=p(o,c,u),d(g,a,o,c,u),0!==f&&h(f,a,o,c,u),(_+=y)>=B&&(_-=n),0===w&&(w=1),++i%w==0)for(g-=g/t,(f=(s-=s/30)>>6)<=1&&(f=0),a=0;a<f;a++)l[a]=g*(256*(f*f-a*a)/(f*f))}(),f(),function(){var t,e,n,r,a,c,u,l;for(u=0,l=0,t=0;t<256;t++){for(n=t,r=(a=i[t])[1],e=t+1;e<256;e++)(c=i[e])[1]<r&&(n=e,r=c[1]);if(c=i[n],t!=n&&(e=c[0],c[0]=a[0],a[0]=e,e=c[1],c[1]=a[1],a[1]=e,e=c[2],c[2]=a[2],a[2]=e,e=c[3],c[3]=a[3],a[3]=e),r!=u){for(o[u]=l+t>>1,e=u+1;e<r;e++)o[e]=t;u=r,l=t}}for(o[u]=l+255>>1,e=u+1;e<256;e++)o[e]=255}(),function(){for(var t=[],e=new Array(256),n=0;n<256;n++)e[i[n][3]]=n;for(var r=0,a=0;a<256;a++){var o=e[a];t[r++]=i[o][0],t[r++]=i[o][1],t[r++]=i[o][2]}return t}()},function(){var t;for(t=0;t<256;t++)i[t][0]>>=4,i[t][1]>>=4,i[t][2]>>=4,i[t][3]=t}),h=function(t,e,n,r,a){var o,c,u,s,f,h,d;for((u=e-t)<-1&&(u=-1),(s=e+t)>256&&(s=256),o=e+1,c=e-1,h=1;o<s||c>u;){if(f=l[h++],o<s){d=i[o++];try{d[0]-=f*(d[0]-n)/(1<<18),d[1]-=f*(d[1]-r)/(1<<18),d[2]-=f*(d[2]-a)/(1<<18)}catch(t){}}if(c>u){d=i[c--];try{d[0]-=f*(d[0]-n)/(1<<18),d[1]-=f*(d[1]-r)/(1<<18),d[2]-=f*(d[2]-a)/(1<<18)}catch(t){}}}},d=function(t,e,n,r,a){var o=i[e];o[0]-=t*(o[0]-n)/1024,o[1]-=t*(o[1]-r)/1024,o[2]-=t*(o[2]-a)/1024},p=function(t,e,n){var r,a,o,l,s,f,h,d,p,g;for(p=d=~(1<<31),h=f=-1,r=0;r<256;r++)(a=(g=i[r])[0]-t)<0&&(a=-a),(o=g[1]-e)<0&&(o=-o),a+=o,(o=g[2]-n)<0&&(o=-o),(a+=o)<d&&(d=a,f=r),(l=a-(c[r]>>12))<p&&(p=l,h=r),s=u[r]>>10,u[r]-=s,c[r]+=s<<10;return u[f]+=64,c[f]-=65536,h};return s.apply(this,arguments),a},GIFEncoder=function(){for(var t=0,e={};t<256;t++)e[t]=String.fromCharCode(t);function n(){this.bin=[]}n.prototype.getData=function(){for(var t="",n=this.bin.length,r=0;r<n;r++)t+=e[this.bin[r]];return t},n.prototype.writeByte=function(t){this.bin.push(t)},n.prototype.writeUTFBytes=function(t){for(var e=t.length,n=0;n<e;n++)this.writeByte(t.charCodeAt(n))},n.prototype.writeBytes=function(t,e,n){for(var r=n||t.length,i=e||0;i<r;i++)this.writeByte(t[i])};var r,i,a,o,c,u,l,s,f,h={},d=null,p=-1,g=0,y=!1,w=[],v=7,m=-1,_=!1,B=!0,b=!1,x=10,T="Generated by jsgif (https://github.com/antimatter15/jsgif/)",C=(h.setDelay=function(t){g=Math.round(t/10)},h.setDispose=function(t){t>=0&&(m=t)},h.setRepeat=function(t){t>=0&&(p=t)},h.setTransparent=function(t){d=t},h.setComment=function(t){T=t},h.addFrame=function(t,e){if(null===t||!y||null===o)throw new Error("Please call start method before calling addFrame");var n=!0;try{e?t instanceof ImageData?(c=t.data,sizeset&&r==t.width&&i==t.height||P(t.width,t.height)):t instanceof Uint8ClampedArray?t.length==r*i*4?c=t:(console.log("Please set the correct size: ImageData length mismatch"),n=!1):(console.log("Please provide correct input"),n=!1):(c=t.getImageData(0,0,t.canvas.width,t.canvas.height).data,b||P(t.canvas.width,t.canvas.height)),S(),E(),B&&(F(),R(),p>=0&&D()),k(),""!==T&&I(),U(),B||R(),N(),B=!1}catch(t){n=!1}return n},h.download=function(t){if(null===o||0==_)console.log("Please call start method and add frames and call finish method before calling download");else{t=void 0!==t?t.endsWith(".gif")?t:t+".gif":"download.gif";var e=document.createElement("a");e.download=t,e.href=URL.createObjectURL(new Blob([new Uint8Array(o.bin)],{type:"image/gif"})),e.click()}},h.finish=function(){if(!y)return!1;var t=!0;y=!1;try{o.writeByte(59),_=!0}catch(e){t=!1}return t},function(){a=0,c=null,u=null,l=null,f=null,_=!1,B=!0}),P=(h.setFrameRate=function(t){15!=t&&(g=Math.round(100/t))},h.setQuality=function(t){t<1&&(t=1),x=t},h.setSize=function(t,e){y&&!B||((r=t)<1&&(r=320),(i=e)<1&&(i=240),b=!0)}),E=(h.start=function(){C();var t=!0;_=!1,o=new n;try{o.writeUTFBytes("GIF89a")}catch(e){t=!1}return y=t},h.cont=function(){C();return _=!1,o=new n,y=!0},function(){var t=u.length,e=t/3;l=[];var n=new NeuQuant(u,t,x);f=n.process();for(var r=0,i=0;i<e;i++){var o=n.map(255&u[r++],255&u[r++],255&u[r++]);w[o]=!0,l[i]=o}u=null,s=8,v=7,null!==d&&(a=A(d))}),A=function(t){if(null===f)return-1;for(var e=(16711680&t)>>16,n=(65280&t)>>8,r=255&t,i=0,a=16777216,o=f.length,c=0;c<o;){var u=e-(255&f[c++]),l=n-(255&f[c++]),s=r-(255&f[c]),h=u*u+l*l+s*s,d=c/3;w[d]&&h<a&&(a=h,i=d),c++}return i},S=function(){var t=r,e=i;u=[];for(var n=c,a=0,o=0;o<e;o++)for(var l=0;l<t;l++){var s=o*t*4+4*l;u[a++]=n[s],u[a++]=n[s+1],u[a++]=n[s+2]}},k=function(){var t,e;o.writeByte(33),o.writeByte(249),o.writeByte(4),null===d?(t=0,e=0):(t=1,e=2),m>=0&&(e=7&m),e<<=2,o.writeByte(0|e|t),z(g),o.writeByte(a),o.writeByte(0)},I=function(){o.writeByte(33),o.writeByte(254),o.writeByte(T.length),o.writeUTFBytes(T),o.writeByte(0)},U=function(){o.writeByte(44),z(0),z(0),z(r),z(i),B?o.writeByte(0):o.writeByte(128|v)},F=function(){z(r),z(i),o.writeByte(240|v),o.writeByte(0),o.writeByte(0)},D=function(){o.writeByte(33),o.writeByte(255),o.writeByte(11),o.writeUTFBytes("NETSCAPE2.0"),o.writeByte(3),o.writeByte(1),z(p),o.writeByte(0)},R=function(){o.writeBytes(f);for(var t=768-f.length,e=0;e<t;e++)o.writeByte(0)},z=function(t){o.writeByte(255&t),o.writeByte(t>>8&255)},N=function(){new LZWEncoder(r,i,l,s).encode(o)};h.stream=function(){return o},h.setProperties=function(t,e){y=t,B=e};return h};